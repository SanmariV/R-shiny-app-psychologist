---
title: "xgboost"
author: "Sanmari Vivier"
date: "6/7/2020"
output: html_document
    theme: flatly
    toc: true
    toc_depth: 2
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
    echo = TRUE,
    message = FALSE,
    warning = FALSE)
```

```{r}
library(tidyverse)
library(reticulate)
```
```{r}
# set conda environment
use_condaenv("py3.8", required = TRUE)

# check if the correct environment is being used
py_config()
```


```{python}
# is python working?
1+1
```


```{python}
# XGBoost algorithm--------------------------------------------
# import python libraries here
# in conda terminal (with py3.8 env activated, install xgboost): pip install xgboost

import xgboost as xgb
import sklearn
from sklearn.model_selection import train_test_split
import pandas as pd
```


```{r}
# write tibble files to .csv files
female_dataset_py <- write_csv(female_dataset, 
                               path = "female_dataset_py.csv")
female_labels_py <- write_csv(female_labels,
                              path = "female_labels_py.csv")
males_dataset_py <- write_csv(males_dataset,
                              path = "males_dataset_py.csv")
males_labels_py <- write_csv(males_labels,
                             path = "males_labels_py.csv")
```


```{python}
# Import the created .csv files
# Females
data_female = pd.read_csv(r'C:/Users/Sanmari Vivier/Dropbox/Personal/r-shiny-app/r-markdown-files/female_dataset_py.csv')
data_female_labels = pd.read_csv(r'C:/Users/Sanmari Vivier/Dropbox/Personal/r-shiny-app/r-markdown-files/female_labels_py.csv')
female_dataset_py = pd.DataFrame(data_female)
female_labels_py = pd.DataFrame(data_female_labels)

# Check to see if it is working
print (female_dataset_py.head(), female_labels_py.head())
```


```{python}
# Import the created .csv files----------------------------------
# Males
data_male = pd.read_csv(r'C:/Users/Sanmari Vivier/Dropbox/Personal/r-shiny-app/r-markdown-files/males_dataset_py.csv')
data_male_labels = pd.read_csv(r'C:/Users/Sanmari Vivier/Dropbox/Personal/r-shiny-app/r-markdown-files/males_labels_py.csv')
male_dataset_py = pd.DataFrame(data_male)
male_labels_py = pd.DataFrame(data_male_labels)

# Check to see if it is working
print (male_dataset_py.head(), male_labels_py.head())
```


```{python}
# Split up the data into training and testing sets
# Females

females_data_train, females_data_test = train_test_split(female_dataset_py,
                 test_size=0.33, 
                 random_state=42)
females_labels_train, females_labels_test = train_test_split(female_labels_py,
                 test_size=0.33, 
                 random_state=42)
```
```{python}
# Split up the data into training and testing sets
# Males

males_data_train, males_data_test = train_test_split(male_dataset_py,
                 test_size=0.33, 
                 random_state=42)
males_labels_train, males_labels_test = train_test_split(male_labels_py,
                 test_size=0.33, 
                 random_state=42)
```

